
{% set nbPages = pagination.count/pagination.nb %}
{% set nbPages = nbPages|round(0,'ceil') %}
<div class="row">
	<div class="col-md-12">
		<nav class="pull-right">
		  <ul class="pagination">
		    <li>
		      <a href="#" onclick="ajaxApplyFilter('#filter-contact','{{ path('render_filter') }}',{{ pagination.page - 1 }})" aria-label="Précédent">
		        <span aria-hidden="true">&laquo;</span>
		      </a>
		    </li>
		    {% for i in 1..nbPages %}
		    	<li {{ i == pagination.page ? 'class="active"' : '' }} ><a href="#" onclick="ajaxApplyFilter('#filter-contact','{{ path('render_filter') }}',{{ i }})">{{ i }}</a></li>
		    {% endfor %}
		    <li>
		      <a href="#" onclick="ajaxApplyFilter('#filter-contact','{{ path('render_filter') }}',{{ pagination.page + 1 }})" aria-label="Suivant">
		        <span aria-hidden="true">&raquo;</span>
		      </a>
		    </li>
		  </ul>
		</nav>

		{% set nbs = [1,10,20,40,100] %}
		<select id="sel-nb-per-page" style="margin:20px" class="select-default pull-right" onchange="ajaxApplyFilter('#filter-contact','{{ path('render_filter') }}')">
			{% for nb in nbs %}
				<option {{ pagination.nb == nb ? 'selected="selected"' : '' }} value="{{ nb }}">{{ nb }}</option>
			{% endfor %}
		</select>
	</div>
</div>
<div class="table-responsive">
	<table class="table table-striped table-hover selectable">
		<thead>
			<tr>
				<th><input class="cb-select cb-select-all" type="checkbox" /></th>
				<th>Prénom</th>
				<th>Nom</th>
				<th>Num. adhérent</th>
				<th>Statut</th>
				<th>Adresse</th>
				<th>Commune</th>
				<th>Section</th>
				<th>Fonction</th>
				<th>Date de création</th>
			</tr>
		</thead>
		<tbody>
			{% for contact in items %}
				<tr class="clickable contact-line" data-id="{{ contact.id }}">
					<td class="cb-container"><input class="cb-select cb-select-line" type="checkbox" /></td>
					<td>{{ contact.prenom }}</td>
					<td>{{ contact.nom }}</td>
					<td>{{ contact.numAdh }}</td>
					<td><span class="label label-default statut-{{ contact.statutJuridique.id }}">{{ contact.statutJuridique.label }}</span></td>
					<td>{{ contact.adresse }}</td>
					<td>{{ contact.commune }}</td>
					<td>{{ contact.section ? contact.section.nom : 'Aucune' }}</td>
					<td>{{ contact.fonctionSection ? 'Section : '~contact.fonctionSection.label|upper : '' }}<br /> {{ contact.fonctionGroupement ? 'Groupement : '~contact.fonctionGroupement.label|upper : '' }}</td>
					<td>{{ contact.dateEntree ? contact.dateEntree.format('d/m/Y') : '' }}</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

<script type="text/javascript">
	$(function(){
		$('.contact-line td:not(.cb-container)').click(function(){
			location.href = '/contact/'+$(this).parents('.contact-line').data('id');
		})
	});


</script>

