{% extends 'base.html.twig' %}

{% block title %}Gestuniat - Documents de  {{ contact.prenom }} {{ contact.nom }}{% endblock %}

{% block additionnal_classes %}internal has-left-column{% endblock %}

{% block left_column %}

	{% include 'operateur/contacts/infos-gen.inc.html.twig'  %}

{% endblock %}

{% block content %}
	<h2>Gestion des documents</h2>
	<ol class="breadcrumb">
	  <li><a href="{{ path('view_contact',{'idContact':contact.id }) }}">Accueil</a></li>
	  <li class="active">Gestion des documents</li>
	</ol>
	<table class="table table-striped table-hover selectable">
		<thead>
			<tr>
				<th></th>
				<th>Type</th>
				<th>Date de début</th>
				<th>Date de fin</th>
				<th>Nom / libellé</th>
				<th>Créateur</th>
			</tr>
		</thead>
		<tbody>
			{% for dossier in dossiers %}
				<tr>
					<td style="position:relative">
						{% include 'operateur/contacts/contextual-default.inc.html.twig' with {'entity':'dossier','object':dossier,'deletePath':path('delete_dossier',{'idDocument':dossier.id})} %}
					</td>
					<td><span class="glyphicons glyphicon-folder-closed"></span>Dossier</td>
					<td>{{ dossier.dateOuverture ? dossier.dateOuverture.format('m/d/Y') : '' }}</td>
					<td>{{ dossier.dateFermeture ? dossier.dateFermeture.format('m/d/Y') : '' }}</td>
					<td>{{ dossier.nom }}</td>
					<td>{{ dossier.operateur.prenom }} {{ dossier.operateur.nom }}</td>
				</tr>
			{% endfor %}
			{% for document in documents %}
				<tr>
					<td style="position:relative">
						{% include 'operateur/contacts/contextual-default.inc.html.twig' with {'entity':'document','object':document,'deletePath':path('delete_document',{'idDocument':document.id})} %}
					</td>
					<td><span class="glyphicons glyphicon-file"></span>Document</td>
					<td>-</td>
					<td>-</td>
					<td>{{ document.label }}</td>
					<td>{{ document.operateur.prenom }} {{ document.operateur.nom }}</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<button class="btn btn-primary" data-toggle="modal" data-target="#add-document-0">Saisir un nouveau document</button>
	<br />
	{% include 'modals/default.html.twig' with {'form':newDocumentForm,'entity':'document','object':false,'title':'Ajouter un nouveau document'} %}
{% endblock %}